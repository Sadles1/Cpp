#include <iostream>
#include <ctime>
#include <cmath>
#include <algorithm>
#include <vector>
#define alpha 2.0f

using namespace std;

float dCount(float X,float Y)
{
	return (1.f - alpha / 30.f) * X + alpha / 30.f * Y;
}

float XCount()
{
	int r = rand() % 100 + 1;
	if (r <= 10)
	{
		return alpha;
	}
	if (r > 10 && r <= 60)
	{
		return alpha + 1.0f;
	}
	if (r > 60)
	{
		return alpha + 3.0f;
	}
}

float YCount()
{
	float b = alpha / 30.0f;
	return ((b + 1) * pow(rand() % 20, b)) / (pow(20.0f, b + 1));
}

int main()
{
	srand(time(NULL));
	vector <float> arr;
	setlocale(LC_ALL, "Russian");
	int number = 0;
	float d,X,Y,P;

	for (int i = 0; i < 50; i++)
	{
		X = XCount();
		Y = YCount();
		arr.push_back(dCount(X, Y));
		if (arr.at(i) > (1.0f - (alpha / 30.0f))* (alpha + 3.0f))
		{
			number++;
		}
	}

	sort(arr.begin(), arr.end());
	P = float(number) / 50.0f;
	cout << "50: " << endl;
	cout << "Вероятность что d превысит = " << P << endl;
	cout << "Квантиль уровня 0.9 d = " << arr.at(46) << endl << endl;

	number = 0;
	vector <float> arr2;

	for (int i = 0; i < 500; i++)
	{
		X = XCount();
		Y = YCount();
		arr2.push_back(dCount(X, Y));
		if (arr2.at(i) > (1.0f - (alpha / 30.0f))* (alpha + 3.0f))
		{
			number++;
		}
	}

	sort(arr2.begin(), arr2.end());

	P = float(number) / 500.0f;
	cout << "500: " << endl;
	cout << "Вероятность что d превысит = " << P << endl;
	cout << "Квантиль уровня 0.9 d = " << arr2.at(451) << endl << endl;
}
